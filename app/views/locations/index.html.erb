  <p id="notice"><%= notice %></p>

  <h2>Search Hangout Location or create a new one <%= link_to 'Hangout', new_location_path %></h2>

  <%= form_tag locations_path, :method => :get do %>
    <p>
    <div id="form" class="col-sm-6 inner-right-md animated fadeInUp">
      <%= text_field_tag :search, params[:search] %>
      <div class="col-sm-6 col-sm-offset-3">
        <%= submit_tag "Find Pals Nearby", class: 'btn btn-small', :name => nil %>
      </div>
    </div>
    </p>
  <% end %>

  <div class="row">
		<div class="col-sm-12">
			<div class="row">


					<h2>Listing Hangouts</h2>

          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Address</th>
                <th colspan="3"></th>
              </tr>
            </thead>

            <tbody>
                <% @locations.each do |location| %>
                  <% location.users.each do |x| %>
                <tr>
                  <td><%= x.name %></td>
                  <td><%= link_to 'Show', location %></td>
                <% if location.users.include?(current_user) %>
                  <td><%= link_to 'Edit', edit_location_path(location) %></td>
                  <td><%= link_to 'Destroy', location, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                <% end %>
                </tr>
                  <% end %>
                <% end %>
            </tbody>
          </table>

      </div>
    </div>
  </div>





  <br>



  <br>

  <div style='width: 800px;'>
    <div id="map" style='width: 800px; height: 400px;'></div>
  </div>

  <br>

  <script type="text/javascript">
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    // debugger;
    markers = handler.addMarkers(<%=raw @hash.to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
  });
  </script>
